<h1>Manage Users</h1>

<div class="card" style="margin-bottom: 40px;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>User List</h2>
    <div style="display: flex; gap: 12px;">
      <span style="background: #EBF4FF; padding: 8px 16px; border-radius: 6px; font-size: 13px;">
        <strong style="color: #2C5282;"><%= @total_users %></strong> Total Users
      </span>
      <span style="background: #E6FFED; padding: 8px 16px; border-radius: 6px; font-size: 13px;">
        <strong style="color: #22543D;"><%= @admin_users %></strong> Admins
      </span>
      <span style="background: #FFF5EB; padding: 8px 16px; border-radius: 6px; font-size: 13px;">
        <strong style="color: #7C2D12;"><%= @active_users %></strong> Active
      </span>
    </div>
  </div>

  <% if @users.any? %>
    <div style="margin-top: 20px; overflow-x: auto;">
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Role</th>
            <th>Pets</th>
            <th>Requests</th>
            <th>Joined</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><strong><%= user.full_name %></strong></td>
              <td><code style="background: #EDF2F7; padding: 4px 8px; border-radius: 4px; font-size: 12px;"><%= user.email %></code></td>
              <td><%= user.phone || 'â€”' %></td>
              <td>
                <% if user.admin? %>
                  <span class="badge badge-warning" style="background: #FFF5EB; color: #7C2D12;">Admin</span>
                <% elsif user.shelter_manager? %>
                  <span class="badge badge-info" style="background: #EBF4FF; color: #2C5282;">Shelter Manager</span>
                <% else %>
                  <span class="badge badge-primary" style="background: #EBF4FF; color: #2C5282;">User</span>
                <% end %>
              </td>
              <td><%= user.pets.count %></td>
              <td><%= user.requests.count %></td>
              <td style="font-size: 13px; color: #718096;"><%= user.created_at.strftime('%b %d, %Y') %></td>
              <td>
                <div style="display: flex; gap: 6px;">
                  <%= link_to 'View', admin_user_path(user), class: 'btn btn-small btn-outline', style: 'padding: 6px 12px; font-size: 12px;' %>
                  <% if user.admin? %>
                    <%= link_to 'Remove Admin', admin_remove_admin_user_path(user), method: :patch, class: 'btn btn-small btn-danger', style: 'padding: 6px 12px; font-size: 12px;' %>
                  <% else %>
                    <%= link_to 'Make Admin', admin_make_admin_user_path(user), method: :patch, class: 'btn btn-small btn-primary', style: 'padding: 6px 12px; font-size: 12px;' %>
                  <% end %>
                  <%= link_to 'Delete', admin_user_path(user), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-small btn-danger', style: 'padding: 6px 12px; font-size: 12px;' %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div style="margin-top: 24px; text-align: center;">
      <%= paginate @users %>
    </div>
  <% else %>
    <p style="margin-top: 20px; color: #718096; text-align: center;">No users found.</p>
  <% end %>
</div>
