<div class="container max-w-2xl py-8">
  <h1 class="text-3xl font-bold mb-6 text-gray-900"><%= @pet.persisted? ? 'Edit Pet' : 'Add New Pet' %></h1>

  <div class="bg-white rounded-lg shadow-md p-6">
    <% if @pet.errors.any? %>
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
        <p class="font-bold"><%= pluralize(@pet.errors.count, 'error') %> prohibited this pet from being saved:</p>
        <ul class="mt-2 list-disc list-inside">
          <% @pet.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form_with model: [:admin, @pet], local: true, html: { multipart: true } do |f| %>
      <div class="space-y-4">
        <div>
          <%= f.label :name, 'Pet Name', class: 'block text-sm font-semibold text-gray-700' %>
          <%= f.text_field :name, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <%= f.label :pet_type, 'Species', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.select :pet_type, [['Dog', 'dog'], ['Cat', 'cat'], ['Rabbit', 'rabbit'], ['Bird', 'bird'], ['Other', 'other']], {}, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
          </div>
          <div>
            <%= f.label :breed, 'Breed', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.text_field :breed, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <%= f.label :age, 'Age (in years)', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.number_field :age, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500', step: 0.1 %>
          </div>
          <div>
            <%= f.label :size, 'Size', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.select :size, [['Small', 'small'], ['Medium', 'medium'], ['Large', 'large']], {}, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <%= f.label :sex, 'Sex', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.select :sex, [['Male', 'male'], ['Female', 'female']], {}, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
          </div>
          <div>
            <%= f.label :health_status, 'Health Status', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.text_field :health_status, placeholder: 'e.g., Excellent', class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div class="flex items-center">
            <%= f.label :vaccinated, 'Vaccinated', class: 'text-sm font-semibold text-gray-700' %>
            <%= f.check_box :vaccinated, class: 'ml-2 w-4 h-4' %>
          </div>
          <div class="flex items-center">
            <%= f.label :available, 'Available for Adoption', class: 'text-sm font-semibold text-gray-700' %>
            <%= f.check_box :available, class: 'ml-2 w-4 h-4' %>
          </div>
        </div>

        <div>
          <%= f.label :description, 'Description', class: 'block text-sm font-semibold text-gray-700' %>
          <%= f.text_area :description, rows: 5, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500', placeholder: 'Tell us about this pet...' %>
        </div>

        <div class="mt-4">
          <%= f.label :image, 'Photo', class: 'block text-sm font-semibold text-gray-700' %>
          <div class="mt-2 flex items-center gap-4">
            <div class="w-32 h-32 bg-gray-100 rounded overflow-hidden flex items-center justify-center border border-gray-200">
              <% if @pet.image.file.present? %>
                <%= image_tag @pet.photo_url, alt: @pet.name, class: 'object-cover w-full h-full' %>
              <% else %>
                <svg class="w-12 h-12 text-gray-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7M16 3v4M8 3v4m8 4l-3 3-2-2-4 4" />
                </svg>
              <% end %>
            </div>

            <div class="flex-1">
              <%= f.file_field :image, accept: 'image/*', class: 'block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100' %>
              <p class="mt-2 text-xs text-gray-500">Accepted: JPG, PNG, GIF â€” Max 5MB.</p>
              <% if @pet.image.file.present? %>
                <div class="mt-2">
                  <%= check_box_tag 'remove_image', '1', false, id: 'remove_image', class: 'mr-2' %>
                  <%= label_tag 'remove_image', 'Remove current photo', class: 'text-sm text-gray-700' %>
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <%= f.label :latitude, 'Latitude', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.number_field :latitude, step: 0.0001, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
          </div>
          <div>
            <%= f.label :longitude, 'Longitude', class: 'block text-sm font-semibold text-gray-700' %>
            <%= f.number_field :longitude, step: 0.0001, class: 'w-full mt-2 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500' %>
          </div>
        </div>

        <div class="flex gap-3 justify-end mt-6">
          <%= link_to 'Cancel', admin_pets_path, class: 'btn btn-outline' %>
          <%= f.submit @pet.persisted? ? 'Update Pet' : 'Create Pet', class: 'btn btn-primary' %>
        </div>
      </div>
    <% end %>
  </div>
</div>
