<div class="container max-w-4xl py-8">
  <div class="mb-6">
    <%= link_to 'â† Back to Requests', admin_requests_path, class: 'link link-primary' %>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Request Summary -->
    <div class="md:col-span-1">
      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-bold mb-4 text-gray-900">Request Details</h3>
        <div class="space-y-3 text-sm">
          <div>
            <p class="text-gray-600">Status</p>
            <span class="px-3 py-1 rounded-full text-sm font-semibold text-white
              <%= case @request.status
                  when 'open' then 'bg-yellow-500'
                  when 'approved' then 'bg-green-500'
                  when 'rejected' then 'bg-red-500'
                  when 'completed' then 'bg-blue-500'
                  else 'bg-gray-400'
                  end %>">
              <%= @request.status.upcase %>
            </span>
          </div>
          <div>
            <p class="text-gray-600">Type</p>
            <p class="font-semibold text-gray-900"><%= @request.request_type.capitalize %></p>
          </div>
          <div>
            <p class="text-gray-600">Submitted</p>
            <p class="font-semibold text-gray-900"><%= @request.created_at.strftime('%b %d, %Y') %></p>
          </div>
          <% if @request.route_distance.present? %>
            <div>
              <p class="text-gray-600">Route Distance</p>
              <p class="font-semibold text-gray-900"><%= @request.route_distance.round(2) %> km</p>
            </div>
          <% end %>
        </div>

        <% if @request.open? %>
          <div class="mt-6 space-y-2">
            <%= link_to 'Approve Request', admin_request_path(@request, status: 'approved'), method: :patch, data: { confirm: 'Approve this request?' }, class: 'btn btn-success w-full' %>
            <%= link_to 'Reject Request', admin_request_path(@request, status: 'rejected'), method: :patch, data: { confirm: 'Reject this request?' }, class: 'btn btn-danger w-full' %>
          </div>
        <% end %>
      </div>
    </div>

    <!-- User & Pet Info -->
    <div class="md:col-span-2 space-y-6">
      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-bold mb-4 text-gray-900">Applicant Information</h3>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <p class="text-sm text-gray-600">Name</p>
            <p class="font-semibold text-gray-900"><%= @request.user.name %></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Email</p>
            <p class="font-semibold text-gray-900"><%= link_to @request.user.email, "mailto:#{@request.user.email}", class: 'link link-primary' %></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Joined</p>
            <p class="font-semibold text-gray-900"><%= @request.user.created_at.strftime('%b %d, %Y') %></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Total Requests</p>
            <p class="font-semibold text-gray-900"><%= @request.user.requests.count %></p>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-bold mb-4 text-gray-900">Pet Information</h3>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <p class="text-sm text-gray-600">Name</p>
            <p class="font-semibold text-gray-900"><%= @request.pet.name %></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Species</p>
            <p class="font-semibold text-gray-900"><%= @request.pet.pet_type&.titleize %></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Breed</p>
            <p class="font-semibold text-gray-900"><%= @request.pet.breed %></p>
          </div>
          <div>
            <p class="text-sm text-gray-600">Age</p>
            <p class="font-semibold text-gray-900"><%= @request.pet.age %> years</p>
          </div>
        </div>
        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
          <p class="text-sm text-gray-600 mb-1">Description</p>
          <p class="text-gray-900"><%= @request.pet.description %></p>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-bold mb-4 text-gray-900">Applicant Notes</h3>
        <div class="p-4 bg-gray-50 rounded-lg">
          <p class="text-gray-900"><%= @request.notes || 'No additional notes provided.' %></p>
        </div>
      </div>
    </div>
  </div>
</div>
